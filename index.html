<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="css/leaflet.css">
    <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
    <link rel="stylesheet" href="css/qgis2web.css">
    <link rel="stylesheet" href="css/fontawesome-all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <title>WebGIS Kerentanan Banjir Situbondo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
    </style>
</head>
<body>
    <!--HEADER-->
    <header class="header">
        <a href="#home" class="logo">Kelompok 4 • Sistem Informasi Perencanaan D</a>
        <i class="fa-solid fa-bars" id="menu-icon"></i>
        <nav class="navbar">  
            <a href="#home">Home</a>
            <a href="#tentang">Tentang</a>
            <a href="#services">Map</a>
        </nav>
    </header>
    <!--HOME SECTION-->
    <section class="home" id="home">
        <div class="home-content">
            <h3>Welcome To WebGIS</h3>
            <h1>Kerentanan Banjir Wilayah Situbondo</h1>
            <h2>Presented By: <span class="multiple-text"></span></h2>
        </div>
    </section>
    <!--TENTANG SECTION-->
    <section class="tentang" id="tentang">
        <div class="tentang-img">
            <img src="images/gif1.gif" alt="">
        </div>

        <div class="tentang-content">
            <h2 class="heading">Tentang <span>Situbondo</span></h2>
            <p> Banjir sering terjadi di Indonesia, termasuk di Kabupaten Situbondo yang mengalami banjir tahunan akibat hujan deras dan sungai yang meluap. Wilayah perkotaan Situbondo sering terkena banjir karena topografinya cekung, meskipun ada upaya normalisasi sungai dan selokan. Curah hujan yang tinggi dari daerah hulu Kabupaten Bondowoso juga berkontribusi dalam menyebabkan banjir. Penelitian menggunakan GIS dilakukan untuk mengetahui tingkat kerentanan banjir dengan data ketinggian, kelerengan, jarak dari sungai, limpasan air, dan curah hujan, disajikan melalui WebGIS<br> 
                <br>Jelajahi berbagai lapisan, informasi rinci tentang risiko banjir, dan peta interaktif untuk memahami kerentanan di berbagai wilayah.
            </p>
            <a href="services" class="btn">Read More</a>
        </div>
    </section>
    <section class="services" id="services">
        <h2 class="heading">Map <span>Situbondo</span></h2>
        <div class="services-container">
            <div class="services-box">
                <div id="map">
            
                    <script src="js/qgis2web_expressions.js"></script>
                    <script src="js/leaflet.js"></script>
                    <script src="js/L.Control.Layers.Tree.min.js"></script>
                    <script src="js/leaflet.rotatedMarker.js"></script>
                    <script src="js/leaflet.pattern.js"></script>
                    <script src="js/leaflet-hash.js"></script>
                    <script src="js/Autolinker.min.js"></script>
                    <script src="js/rbush.min.js"></script>
                    <script src="js/labelgun.min.js"></script>
                    <script src="js/labels.js"></script>
                    <script src="data/kerentananbanjir_1.js"></script>
                    <script>
                        var map = L.map('map', {
                            zoomControl: false,
                            maxZoom: 28,
                            minZoom: 1
                        }).fitBounds([[-8.350380503427756,113.09680818763236],[-6.986339706878466,114.97294621155523]]);
                        var hash = new L.Hash(map);
                        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
                        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
            
                        function removeEmptyRowsFromPopupContent(content, feature) {
                            var tempDiv = document.createElement('div');
                            tempDiv.innerHTML = content;
                            var rows = tempDiv.querySelectorAll('tr');
                            for (var i = 0; i < rows.length; i++) {
                                var td = rows[i].querySelector('td.visible-with-data');
                                var key = td ? td.id : '';
                                if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                                    rows[i].parentNode.removeChild(rows[i]);
                                }
                            }
                            return tempDiv.innerHTML;
                        }
            
                        function addClassToPopupIfMedia(content, popup) {
                            var tempDiv = document.createElement('div');
                            tempDiv.innerHTML = content;
                            if (tempDiv.querySelector('td img')) {
                                popup._contentNode.classList.add('media');
                                setTimeout(function() {
                                    popup.update();
                                }, 10);
                            } else {
                                popup._contentNode.classList.remove('media');
                            }
                        }
            
                        var title = new L.Control({'position':'topright'});
                        title.onAdd = function (map) {
                            this._div = L.DomUtil.create('div', 'info');
                            this.update();
                            return this._div;
                        };
                        title.update = function () {
                            this._div.innerHTML = '<h2>Peta Kerentanan Banjir</h2>';
                        };
                        title.addTo(map);
            
                        var zoomControl = L.control.zoom({
                            position: 'topleft'
                        }).addTo(map);
                        var bounds_group = new L.featureGroup([]);
                        function setBounds() {}
            
                        map.createPane('pane_OSMStandard_0');
                        map.getPane('pane_OSMStandard_0').style.zIndex = 400;
                        var layer_OSMStandard_0 = L.tileLayer('http://tile.openstreetmap.org/{z}/{x}/{y}.png', {
                            pane: 'pane_OSMStandard_0',
                            opacity: 1.0,
                            attribution: '<a href="https://www.openstreetmap.org/copyright">© OpenStreetMap contributors, CC-BY-SA</a>',
                            minZoom: 1,
                            maxZoom: 28,
                            minNativeZoom: 0,
                            maxNativeZoom: 19
                        });
                        layer_OSMStandard_0;
                        map.addLayer(layer_OSMStandard_0);
            
                        function pop_kerentananbanjir_1(feature, layer) {
                            var popupContent = '<table>\
                                <tr>\
                                    <td class="visible-with-data" id="Kerawanan" colspan="2"><strong>Kerawanan</strong><br />' + (feature.properties['Kerawanan'] !== null ? autolinker.link(feature.properties['Kerawanan'].toLocaleString()) : '') + '</td>\
                                </tr>\
                            </table>';
                            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
                            layer.on('popupopen', function(e) {
                                addClassToPopupIfMedia(content, e.popup);
                            });
                            layer.bindPopup(content, { maxHeight: 400 });
                        }
            
                        function style_kerentananbanjir_1_0(feature) {
                            switch(String(feature.properties['Kerawanan'])) {
                                case 'Tidak Rawan':
                                    return {
                                        pane: 'pane_kerentananbanjir_1',
                                        opacity: 1,
                                        color: 'rgba(35,35,35,1.0)',
                                        dashArray: '',
                                        lineCap: 'butt',
                                        lineJoin: 'miter',
                                        weight: 1.0, 
                                        fill: true,
                                        fillOpacity: 1,
                                        fillColor: 'rgba(135,76,211,1.0)',
                                        interactive: true,
                                    };
                                case 'Kurang Rawan':
                                    return {
                                        pane: 'pane_kerentananbanjir_1',
                                        opacity: 1,
                                        color: 'rgba(35,35,35,1.0)',
                                        dashArray: '',
                                        lineCap: 'butt',
                                        lineJoin: 'miter',
                                        weight: 1.0, 
                                        fill: true,
                                        fillOpacity: 1,
                                        fillColor: 'rgba(46,198,221,1.0)',
                                        interactive: true,
                                    };
                                case 'Rawan':
                                    return {
                                        pane: 'pane_kerentananbanjir_1',
                                        opacity: 1,
                                        color: 'rgba(35,35,35,1.0)',
                                        dashArray: '',
                                        lineCap: 'butt',
                                        lineJoin: 'miter',
                                        weight: 1.0, 
                                        fill: true,
                                        fillOpacity: 1,
                                        fillColor: 'rgba(234,167,107,1.0)',
                                        interactive: true,
                                    };
                                case 'Sangat Rawan':
                                    return {
                                        pane: 'pane_kerentananbanjir_1',
                                        opacity: 1,
                                        color: 'rgba(35,35,35,1.0)',
                                        dashArray: '',
                                        lineCap: 'butt',
                                        lineJoin: 'miter',
                                        weight: 1.0, 
                                        fill: true,
                                        fillOpacity: 1,
                                        fillColor: 'rgba(214,65,65,1.0)',
                                        interactive: true,
                                    };
                            }
                        }
                        map.createPane('pane_kerentananbanjir_1');
                        map.getPane('pane_kerentananbanjir_1').style.zIndex = 401;
                        map.getPane('pane_kerentananbanjir_1').style['mix-blend-mode'] = 'normal';
                        var layer_kerentananbanjir_1 = new L.geoJson(json_kerentananbanjir_1, {
                            attribution: '',
                            interactive: true,
                            dataVar: 'json_kerentananbanjir_1',
                            layerName: 'layer_kerentananbanjir_1',
                            pane: 'pane_kerentananbanjir_1',
                            onEachFeature: pop_kerentananbanjir_1,
                            style: style_kerentananbanjir_1_0,
                        });
                        bounds_group.addLayer(layer_kerentananbanjir_1);
                        map.addLayer(layer_kerentananbanjir_1);
                        setBounds();
                    </script>
                </div>
            </div>
        </div>
    </section>
    <!--ANGGOTA SECTION-->
    <section class="anggota" id="anggota">
        <h2 class="heading">Anggota <span>Kelompok 4</span></h2>
        <div class="anggota-container">
            <div class="anggota-box">
                <h3>Nama Anggota 1</h3>
                <p>Deskripsi singkat tentang anggota 1.</p>
            </div>
            <div class="anggota-box">
                <h3>Nama Anggota 2</h3>
                <p>Deskripsi singkat tentang anggota 2.</p>
            </div>
            <div class="anggota-box">
                <h3>Nama Anggota 3</h3>
                <p>Deskripsi singkat tentang anggota 3.</p>
            </div>
            <div class="anggota-box">
                <h3>Nama Anggota 4</h3>
                <p>Deskripsi singkat tentang anggota 4.</p>
            </div>
            <div class="anggota-box">
                <h3>Nama Anggota 5</h3>
                <p>Deskripsi singkat tentang anggota 5.</p>
            </div>
        </div>
    </section>
    <!-- FOOTER SECTION -->
    <footer>
        <p>&copy; 2024 Kelompok 4. All rights reserved.</p>
    </footer>
    <script src="js/script.js"></script>
</body>
</html>
